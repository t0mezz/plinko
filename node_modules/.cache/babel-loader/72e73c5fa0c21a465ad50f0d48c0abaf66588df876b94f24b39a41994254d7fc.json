{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nconst useBallMovement = (initialX, initialY) => {\n  _s();\n  const [position, setPosition] = useState({\n    x: initialX,\n    y: initialY\n  });\n  const [velocity, setVelocity] = useState({\n    x: 0,\n    y: 5\n  });\n  const pegs = generateWiderPyramidPegs(10, 250, 50); // Larger pyramid\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setPosition(prevPos => {\n        let newX = prevPos.x + velocity.x;\n        let newY = prevPos.y + velocity.y;\n        let collided = false;\n\n        // Detect collision with each peg\n        for (let peg of pegs) {\n          const dx = newX - peg.x;\n          const dy = newY - peg.y;\n          const distance = Math.sqrt(dx * dx + dy * dy);\n          if (distance < 15) {\n            collided = true;\n            setVelocity(prevVel => ({\n              x: prevVel.x * 0.7 + (Math.random() - 0.5) * 2,\n              // Dampened bounce with random direction\n              y: prevVel.y * -0.7 // Bounces slightly upwards\n            }));\n            break;\n          }\n        }\n\n        // Handle side collisions\n        if (newX < 10 || newX > 490) {\n          setVelocity(prevVel => ({\n            x: -prevVel.x,\n            y: prevVel.y\n          }));\n        }\n        return {\n          x: newX,\n          y: newY + 1\n        };\n      });\n      setVelocity(prevVel => ({\n        x: prevVel.x,\n        y: prevVel.y + 0.3\n      })); // Gravity effect\n    }, 30);\n    return () => clearInterval(interval);\n  }, [velocity]);\n  return position;\n};\n_s(useBallMovement, \"2xFRMGTURmdfDsntW0G0Zv1x5BM=\");\nconst generateWiderPyramidPegs = (rows, centerX, startY) => {\n  const pegs = [];\n  const spacingX = 35;\n  const spacingY = 50;\n  for (let row = 0; row < rows; row++) {\n    for (let col = 0; col <= row; col++) {\n      pegs.push({\n        x: centerX + (col - row / 2) * spacingX,\n        y: startY + row * spacingY\n      });\n    }\n  }\n  return pegs;\n};\nexport default useBallMovement;","map":{"version":3,"names":["useEffect","useState","useBallMovement","initialX","initialY","_s","position","setPosition","x","y","velocity","setVelocity","pegs","generateWiderPyramidPegs","interval","setInterval","prevPos","newX","newY","collided","peg","dx","dy","distance","Math","sqrt","prevVel","random","clearInterval","rows","centerX","startY","spacingX","spacingY","row","col","push"],"sources":["/home/tom/Desktop/plinko/src/hooks/useBallMovement.js"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nconst useBallMovement = (initialX, initialY) => {\n  const [position, setPosition] = useState({ x: initialX, y: initialY });\n  const [velocity, setVelocity] = useState({ x: 0, y: 5 });\n  const pegs = generateWiderPyramidPegs(10, 250, 50); // Larger pyramid\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setPosition((prevPos) => {\n        let newX = prevPos.x + velocity.x;\n        let newY = prevPos.y + velocity.y;\n\n        let collided = false;\n\n        // Detect collision with each peg\n        for (let peg of pegs) {\n          const dx = newX - peg.x;\n          const dy = newY - peg.y;\n          const distance = Math.sqrt(dx * dx + dy * dy);\n          if (distance < 15) {\n            collided = true;\n            setVelocity((prevVel) => ({\n              x: prevVel.x * 0.7 + (Math.random() - 0.5) * 2, // Dampened bounce with random direction\n              y: prevVel.y * -0.7, // Bounces slightly upwards\n            }));\n            break;\n          }\n        }\n\n        // Handle side collisions\n        if (newX < 10 || newX > 490) {\n          setVelocity((prevVel) => ({ x: -prevVel.x, y: prevVel.y }));\n        }\n\n        return { x: newX, y: newY + 1 };\n      });\n\n      setVelocity((prevVel) => ({ x: prevVel.x, y: prevVel.y + 0.3 })); // Gravity effect\n    }, 30);\n\n    return () => clearInterval(interval);\n  }, [velocity]);\n\n  return position;\n};\n\nconst generateWiderPyramidPegs = (rows, centerX, startY) => {\n  const pegs = [];\n  const spacingX = 35;\n  const spacingY = 50;\n\n  for (let row = 0; row < rows; row++) {\n    for (let col = 0; col <= row; col++) {\n      pegs.push({\n        x: centerX + (col - row / 2) * spacingX,\n        y: startY + row * spacingY,\n      });\n    }\n  }\n\n  return pegs;\n};\n\nexport default useBallMovement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}